{% extends "base.html" %}

{% block css %}

			.preview{
				width: 100px;
				height: 100px;
			}

{% endblock %}
{% block body %}

<div class="preview" id="pv1"></div>
<input type="file" id="icon2" accept="image/jpeg"/>&nbsp;<button onclick="pv2.reset()">重置</button>
<div class="preview" id="pv2"></div>


{% endblock %}

{% block js %}
<script type="text/javascript">
    var $ = function(id){
        return document.getElementById(id.substring(1));
    };
</script>
<script type="text/javascript" src="/statics/JS/preview.js"></script>
<script type="text/javascript">
  var get = function(id){
  	return document.getElementById(id);
  };
  Preview.defaults.onlegal = false;
  Preview.defaults.onillegal = true;
  var pv1 = new Preview(get('icon1'), get('pv1'), {
  	onlegal: function(path, ext, accept){
      alert(pv1 === this);
      alert('文件路径:' + path);
      alert('文件后缀:' + ext);
      alert('期待的MIME类型:' + accept);
  		return true;
  	},
  	onillegal: false
  });
  var pv2 = Preview(get('pv2'), get('icon2'));
</script>

{% endblock %}